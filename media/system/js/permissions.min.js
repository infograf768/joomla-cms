function sendPermissions(e){var t=document.getElementById("icon_"+this.id);t.removeAttribute("class"),t.setAttribute("style","background: url(../media/system/images/modal/spinner.gif); display: inline-block; width: 16px; height: 16px");var r="not",a=getUrlParam("component"),s=getUrlParam("extension"),n=getUrlParam("option"),i=getUrlParam("view"),o=a,l=this.value;"com_config"==n&&0==a&&0==s?r="root.1":0==s&&"component"==i?r=a:0!=s&&0!=i?(r=s+"."+i+"."+getUrlParam("id"),o=document.getElementById("jform_title").value):0==s&&0!=i&&(r="com_languages"==n&&"language"==i?n+"."+i+"."+getUrlParam("lang_id"):n+"."+i+"."+getUrlParam("id"),o=document.getElementById("jform_title").value);var m=this.id.replace("jform_rules_",""),c=m.lastIndexOf("_"),u=m.substring(0,c),g=m.substring(c+1),d="&comp="+r+"&action="+u+"&rule="+g+"&value="+l+"&title="+o,p="index.php?option=com_config&task=config.store&format=raw"+d;jQuery.ajax({type:"GET",url:p,datatype:"JSON"}).success(function(r){var a=e.target,s=JSON.parse(r),n=JSON.parse(s.data);if(1==n.result)t.removeAttribute("style"),t.setAttribute("class","icon-save"),jQuery(a).parents().next("td").find("span").removeClass().addClass(n["class"]).html(n.text);else{var i={error:[s.message]};Joomla.renderMessages(i),t.removeAttribute("style"),t.setAttribute("class","icon-cancel")}}).fail(function(){var e={error:[Joomla.JText._("JLIB_RULES_REQUEST_FAILURE")]};Joomla.renderMessages(e),t.removeAttribute("style"),t.setAttribute("class","icon-cancel")})}function getUrlParam(e){for(var t=window.location.search.substring(1),r=t.split("&"),a=0;a<r.length;a++){var s=r[a].split("=");if(s[0]==e)return s[1]}return!1}